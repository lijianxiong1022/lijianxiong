# 📋 服务器部署检查清单

## 部署前准备

### 服务器环境
- [ ] CentOS系统已准备好
- [ ] 已获取服务器IP和SSH访问权限
- [ ] MySQL数据库已安装并运行
- [ ] Python 3已安装（建议3.8+）
- [ ] pip3已安装

### 数据库准备
- [ ] 已创建数据库 `order_system`
- [ ] 已创建数据库用户（建议不要使用root）
- [ ] 已授予用户权限
- [ ] 已测试数据库连接

### 代码准备
- [ ] 本地代码已测试通过
- [ ] 已提交到Git仓库（如果使用Git）
- [ ] 已准备好上传到服务器

---

## 部署步骤

### 第一步：上传代码
- [ ] 代码已上传到服务器 `/var/www/order-system`
- [ ] 文件权限已设置正确

### 第二步：配置生产环境
- [ ] 已创建 `.env.production` 文件
- [ ] 数据库配置已填写正确
- [ ] JWT密钥已生成并配置（使用强密钥）
- [ ] Flask环境变量已设置为 `production`
- [ ] `FLASK_DEBUG=False`

### 第三步：安装依赖
- [ ] 已进入 `backend` 目录
- [ ] 已运行 `pip3 install -r requirements.txt`
- [ ] 所有依赖安装成功

### 第四步：初始化数据库
- [ ] 已运行 `python3 init_db.py`
- [ ] 数据库表已创建
- [ ] 默认管理员账户已创建

### 第五步：配置服务
- [ ] Systemd服务文件已创建
- [ ] 服务文件路径已配置正确
- [ ] 服务已启用并启动
- [ ] 服务状态正常

### 第六步：配置Nginx（可选但推荐）
- [ ] Nginx已安装
- [ ] 配置文件已创建
- [ ] 域名/IP已配置
- [ ] 静态文件路径已配置
- [ ] API代理已配置
- [ ] Nginx配置测试通过
- [ ] Nginx已重启

### 第七步：配置防火墙
- [ ] 80端口已开放
- [ ] 443端口已开放（如果使用HTTPS）
- [ ] 防火墙规则已生效

### 第八步：前端配置
- [ ] 前端API地址已自动检测（已修改代码）
- [ ] 或手动修改为服务器地址

---

## 部署后测试

### 基础功能测试
- [ ] 访问前端页面：`http://your_server_ip`
- [ ] 访问后台页面：`http://your_server_ip/admin.html`
- [ ] 测试API：`http://your_server_ip/api/v1/user/register`

### 功能测试
- [ ] 用户注册功能
- [ ] 用户登录功能
- [ ] 管理员登录功能
- [ ] 报单功能
- [ ] 金币转账功能
- [ ] 文件上传功能

### 性能测试
- [ ] 页面加载速度正常
- [ ] API响应时间正常
- [ ] 数据库查询正常

---

## 安全检查

- [ ] 默认管理员密码已修改
- [ ] JWT密钥已使用强密钥
- [ ] 数据库密码强度足够
- [ ] 敏感信息不在代码中硬编码
- [ ] 防火墙已配置
- [ ] 不必要的端口已关闭

---

## 监控和维护

- [ ] 已配置日志查看方式
- [ ] 已了解服务重启方法
- [ ] 已了解日志位置
- [ ] 已准备备份方案

---

## 常见问题处理

### 服务无法启动
```bash
# 查看日志
sudo journalctl -u order-system -n 50

# 检查配置
cat /var/www/order-system/backend/.env.production

# 手动测试
cd /var/www/order-system/backend
python3 app.py
```

### 数据库连接失败
```bash
# 测试连接
mysql -u order_user -p order_system

# 检查MySQL服务
sudo systemctl status mysql
```

### 前端无法访问API
- 检查Nginx配置
- 检查后端服务是否运行
- 检查CORS配置
- 查看浏览器控制台错误

---

## 部署完成确认

- [ ] 所有功能测试通过
- [ ] 性能满足要求
- [ ] 安全配置已检查
- [ ] 备份方案已准备
- [ ] 监控方案已配置

**部署完成！** 🎉

