# ğŸš€ ç«‹å³å¼€å§‹éƒ¨ç½² - æŒ‰æ­¥éª¤æ‰§è¡Œ

## âœ… å·²å®Œæˆçš„å‡†å¤‡å·¥ä½œ

1. âœ… Gitä»“åº“å·²åˆå§‹åŒ–
2. âœ… ç”Ÿäº§ç¯å¢ƒé…ç½®æ–‡ä»¶å·²ç”Ÿæˆ
3. âœ… æ•°æ®åº“åˆå§‹åŒ–è„šæœ¬å·²ç”Ÿæˆ
4. âœ… éƒ¨ç½²è„šæœ¬å·²å‡†å¤‡
5. âœ… Gitè¿œç¨‹ä»“åº“å·²é…ç½®

---

## ğŸ¯ ç¬¬ä¸€æ­¥ï¼šæ¨é€ä»£ç åˆ°GitHub

### åœ¨æœ¬åœ°Windows PowerShellæ‰§è¡Œï¼š

```powershell
cd E:\360MoveData\Users\86182\Desktop\test1

# æ£€æŸ¥è¿œç¨‹ä»“åº“
git remote -v

# æ¨é€ä»£ç åˆ°GitHub
git branch -M main
git push -u origin main
```

**å¦‚æœæ¨é€å¤±è´¥**ï¼ˆä»“åº“å·²å­˜åœ¨ä¸”æœ‰å†…å®¹ï¼‰ï¼š
```powershell
# å…ˆæ‹‰å–è¿œç¨‹ä»£ç 
git pull origin main --allow-unrelated-histories

# è§£å†³å†²çªåå†æ¬¡æ¨é€
git push -u origin main
```

**å¦‚æœæç¤ºéœ€è¦è®¤è¯**ï¼š
- GitHubå¯èƒ½éœ€è¦Personal Access Token
- æˆ–è€…ä½¿ç”¨SSHæ–¹å¼è¿æ¥

---

## ğŸ–¥ï¸ ç¬¬äºŒæ­¥ï¼šè¿æ¥æœåŠ¡å™¨

### åœ¨æœ¬åœ°PowerShellæ‰§è¡Œï¼š

**ä½¿ç”¨å¯†ç ç™»å½•**ï¼š
```powershell
ssh root@175.24.47.45
# è¾“å…¥å¯†ç ï¼šLjx19921022
```

**æˆ–ä½¿ç”¨å¯†é’¥ç™»å½•**ï¼š
```powershell
ssh -i E:/360MoveData/Users/86182/Desktop/test1/serverkey.pem root@175.24.47.45
```

---

## ğŸ“¦ ç¬¬ä¸‰æ­¥ï¼šåœ¨æœåŠ¡å™¨ä¸Šæ‰§è¡Œéƒ¨ç½²

è¿æ¥æœåŠ¡å™¨åï¼Œ**å¤åˆ¶ç²˜è´´ä»¥ä¸‹å®Œæ•´å‘½ä»¤**ï¼š

```bash
# ==========================================
# å®Œæ•´éƒ¨ç½²è„šæœ¬ - ä¸€é”®æ‰§è¡Œ
# ==========================================

# 1. å®‰è£…å¿…è¦è½¯ä»¶
sudo yum update -y
sudo yum install -y python3 python3-pip python3-devel mysql mysql-devel gcc git nginx

# 2. åˆ›å»ºé¡¹ç›®ç›®å½•
sudo mkdir -p /var/www/order-system
sudo chown -R $USER:$USER /var/www/order-system

# 3. é…ç½®MySQLæ•°æ®åº“
mysql -u root -p19921022 << 'MYSQLSCRIPT'
CREATE DATABASE IF NOT EXISTS order_system DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
CREATE USER IF NOT EXISTS 'order_user'@'localhost' IDENTIFIED BY 'ljx19921022..';
GRANT ALL PRIVILEGES ON order_system.* TO 'order_user'@'localhost';
FLUSH PRIVILEGES;
SELECT 'Database configured successfully!' AS result;
MYSQLSCRIPT

# 4. ä»GitHubæ‹‰å–ä»£ç 
cd /var/www/order-system
git clone https://github.com/lijianxiong1022/lijianxiong.git .

# 5. é…ç½®ç”Ÿäº§ç¯å¢ƒ
cd backend
cat > .env.production << 'ENVFILE'
USE_SQLITE=False
DB_HOST=localhost
DB_PORT=3306
DB_USER=order_user
DB_PASSWORD=ljx19921022..
DB_NAME=order_system
JWT_SECRET_KEY=prod-secret-key-2024-11-24-175244745-ljx19921022
JWT_ACCESS_TOKEN_EXPIRES=86400
FLASK_ENV=production
FLASK_DEBUG=False
FLASK_HOST=0.0.0.0
FLASK_PORT=5000
ENVFILE

# 6. å®‰è£…Pythonä¾èµ–
pip3 install --user -r requirements.txt

# 7. åˆå§‹åŒ–æ•°æ®åº“
export FLASK_ENV=production
python3 init_db.py

# 8. åˆ›å»ºä¸Šä¼ ç›®å½•
mkdir -p uploads/exception_orders
chmod -R 755 uploads

# 9. é…ç½®SystemdæœåŠ¡
sudo cp systemd/order-system.service /etc/systemd/system/
sudo systemctl daemon-reload
sudo systemctl enable order-system
sudo systemctl start order-system

# 10. é…ç½®Nginx
sudo cp ../nginx/order-system.conf /etc/nginx/conf.d/
sudo sed -i 's/your_domain.com/175.24.47.45/g' /etc/nginx/conf.d/order-system.conf
sudo nginx -t
sudo systemctl enable nginx
sudo systemctl start nginx

# 11. é…ç½®é˜²ç«å¢™
sudo firewall-cmd --permanent --add-service=http
sudo firewall-cmd --permanent --add-service=https
sudo firewall-cmd --reload

# 12. æµ‹è¯•éƒ¨ç½²
echo "=========================================="
echo "éƒ¨ç½²å®Œæˆï¼æµ‹è¯•ä¸­..."
echo "=========================================="
curl http://localhost:5000/api/v1/user/register
echo ""
echo "æœåŠ¡çŠ¶æ€ï¼š"
sudo systemctl status order-system --no-pager -l | head -20
echo ""
echo "=========================================="
echo "å‰ç«¯åœ°å€: http://175.24.47.45"
echo "åå°åœ°å€: http://175.24.47.45/admin.html"
echo "é»˜è®¤ç®¡ç†å‘˜: admin / admin123"
echo "=========================================="
```

---

## âœ… ç¬¬å››æ­¥ï¼šéªŒè¯éƒ¨ç½²

### 4.1 æµ‹è¯•API
```bash
curl http://175.24.47.45/api/v1/user/register
```

### 4.2 è®¿é—®å‰ç«¯
åœ¨æµè§ˆå™¨æ‰“å¼€ï¼š
- **ç”¨æˆ·ç«¯**ï¼šhttp://175.24.47.45
- **åå°ç®¡ç†**ï¼šhttp://175.24.47.45/admin.html

### 4.3 æµ‹è¯•ç™»å½•
- åå°ç™»å½•ï¼šç”¨æˆ·å `admin`ï¼Œå¯†ç  `admin123`
- **âš ï¸ è¯·ç™»å½•åç«‹å³ä¿®æ”¹å¯†ç ï¼**

---

## ğŸ”„ åç»­æ›´æ–°æµç¨‹

### æœ¬åœ°å¼€å‘å®Œæˆåï¼š

**æ­¥éª¤1ï¼šæœ¬åœ°æäº¤å¹¶æ¨é€**
```powershell
cd E:\360MoveData\Users\86182\Desktop\test1
git add .
git commit -m "æ›´æ–°è¯´æ˜"
git push origin main
```

**æ­¥éª¤2ï¼šæœåŠ¡å™¨æ‹‰å–æ›´æ–°**
```bash
# SSHè¿æ¥æœåŠ¡å™¨
ssh root@175.24.47.45

# è¿›å…¥é¡¹ç›®ç›®å½•
cd /var/www/order-system

# æ‹‰å–æœ€æ–°ä»£ç 
git pull origin main

# å®‰è£…æ–°ä¾èµ–ï¼ˆå¦‚æœæœ‰ï¼‰
cd backend
pip3 install --user -r requirements.txt

# é‡å¯æœåŠ¡
sudo systemctl restart order-system

# æ£€æŸ¥çŠ¶æ€
sudo systemctl status order-system
```

---

## ğŸ› ï¸ å¸¸ç”¨ç®¡ç†å‘½ä»¤

```bash
# æŸ¥çœ‹æœåŠ¡çŠ¶æ€
sudo systemctl status order-system

# æŸ¥çœ‹æœåŠ¡æ—¥å¿—
sudo journalctl -u order-system -f

# é‡å¯æœåŠ¡
sudo systemctl restart order-system

# åœæ­¢æœåŠ¡
sudo systemctl stop order-system

# å¯åŠ¨æœåŠ¡
sudo systemctl start order-system
```

---

## ğŸ“‹ éƒ¨ç½²æ£€æŸ¥æ¸…å•

æ‰§è¡Œå®Œéƒ¨ç½²è„šæœ¬åï¼Œæ£€æŸ¥ï¼š

- [ ] æœåŠ¡çŠ¶æ€æ­£å¸¸ï¼š`sudo systemctl status order-system`
- [ ] APIå¯ä»¥è®¿é—®ï¼š`curl http://175.24.47.45/api/v1/user/register`
- [ ] å‰ç«¯é¡µé¢å¯ä»¥æ‰“å¼€ï¼šhttp://175.24.47.45
- [ ] åå°é¡µé¢å¯ä»¥æ‰“å¼€ï¼šhttp://175.24.47.45/admin.html
- [ ] å¯ä»¥æ­£å¸¸ç™»å½•åå°
- [ ] åŠŸèƒ½æµ‹è¯•é€šè¿‡

---

## ğŸ‰ å¼€å§‹éƒ¨ç½²ï¼

**ç°åœ¨è¯·æ‰§è¡Œç¬¬ä¸€æ­¥ï¼šæ¨é€ä»£ç åˆ°GitHubï¼**

æ‰§è¡Œå®Œæˆåå‘Šè¯‰æˆ‘ç»“æœï¼Œæˆ‘ä¼šç»§ç»­æŒ‡å¯¼ä¸‹ä¸€æ­¥ã€‚

