# ğŸš€ éƒ¨ç½²æ‰§è¡Œæ­¥éª¤ - è¯¦ç»†æŒ‡å—

## ğŸ“‹ éƒ¨ç½²ä¿¡æ¯ç¡®è®¤

æ ¹æ®ä½ æä¾›çš„ä¿¡æ¯ï¼š
- **æœåŠ¡å™¨IP**ï¼š175.24.47.45
- **SSHç”¨æˆ·**ï¼šroot
- **SSHæ–¹å¼**ï¼šå¯†ç ç™»å½•ï¼ˆLjx19921022ï¼‰æˆ–å¯†é’¥ç™»å½•
- **MySQL rootå¯†ç **ï¼š19921022
- **æ•°æ®åº“åç§°**ï¼šorder_system
- **æ•°æ®åº“ç”¨æˆ·**ï¼šorder_user
- **æ•°æ®åº“å¯†ç **ï¼šljx19921022..
- **Gitä»“åº“**ï¼šhttps://github.com/lijianxiong1022/lijianxiong.git

---

## ğŸ¯ ç¬¬ä¸€æ­¥ï¼šæ¨é€ä»£ç åˆ°GitHub

### åœ¨æœ¬åœ°æ‰§è¡Œï¼ˆWindows PowerShellï¼‰

```powershell
# è¿›å…¥é¡¹ç›®ç›®å½•
cd E:\360MoveData\Users\86182\Desktop\test1

# æ·»åŠ è¿œç¨‹ä»“åº“ï¼ˆå¦‚æœè¿˜æ²¡æœ‰ï¼‰
git remote add origin https://github.com/lijianxiong1022/lijianxiong.git

# æ¨é€ä»£ç åˆ°GitHub
git branch -M main
git push -u origin main
```

**å¦‚æœæ¨é€å¤±è´¥**ï¼ˆä»“åº“å·²å­˜åœ¨ä¸”æœ‰å†…å®¹ï¼‰ï¼š
```powershell
# å…ˆæ‹‰å–è¿œç¨‹ä»£ç 
git pull origin main --allow-unrelated-histories

# è§£å†³å†²çªåå†æ¬¡æ¨é€
git push -u origin main
```

---

## ğŸ–¥ï¸ ç¬¬äºŒæ­¥ï¼šè¿æ¥æœåŠ¡å™¨å¹¶åˆå§‹åŒ–ç¯å¢ƒ

### 2.1 è¿æ¥æœåŠ¡å™¨

**ä½¿ç”¨å¯†ç ç™»å½•**ï¼š
```bash
ssh root@175.24.47.45
# è¾“å…¥å¯†ç ï¼šLjx19921022
```

**æˆ–ä½¿ç”¨å¯†é’¥ç™»å½•**ï¼ˆå¦‚æœé…ç½®äº†å¯†é’¥ï¼‰ï¼š
```bash
ssh -i E:/360MoveData/Users/86182/Desktop/test1/serverkey.pem root@175.24.47.45
```

### 2.2 åœ¨æœåŠ¡å™¨ä¸Šæ‰§è¡Œåˆå§‹åŒ–è„šæœ¬

è¿æ¥æœåŠ¡å™¨åï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š

```bash
# æ›´æ–°ç³»ç»Ÿ
sudo yum update -y

# å®‰è£…Python 3ï¼ˆå¦‚æœè¿˜æ²¡æœ‰ï¼‰
sudo yum install -y python3 python3-pip python3-devel

# å®‰è£…MySQLå®¢æˆ·ç«¯å’Œå¼€å‘åº“
sudo yum install -y mysql mysql-devel gcc

# å®‰è£…Gitï¼ˆå¦‚æœè¿˜æ²¡æœ‰ï¼‰
sudo yum install -y git

# å®‰è£…Nginxï¼ˆå¯é€‰ä½†æ¨èï¼‰
sudo yum install -y nginx

# åˆ›å»ºé¡¹ç›®ç›®å½•
sudo mkdir -p /var/www/order-system
sudo chown -R $USER:$USER /var/www/order-system
```

---

## ğŸ—„ï¸ ç¬¬ä¸‰æ­¥ï¼šé…ç½®MySQLæ•°æ®åº“

åœ¨æœåŠ¡å™¨ä¸Šæ‰§è¡Œï¼š

```bash
# è¿æ¥MySQL
mysql -u root -p19921022

# åœ¨MySQLä¸­æ‰§è¡Œä»¥ä¸‹SQLï¼ˆæˆ–ç›´æ¥æ‰§è¡ŒSQLæ–‡ä»¶ï¼‰
```

**æ–¹æ³•1ï¼šç›´æ¥æ‰§è¡ŒSQLå‘½ä»¤**
```sql
CREATE DATABASE IF NOT EXISTS order_system DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
CREATE USER IF NOT EXISTS 'order_user'@'localhost' IDENTIFIED BY 'ljx19921022..';
GRANT ALL PRIVILEGES ON order_system.* TO 'order_user'@'localhost';
FLUSH PRIVILEGES;
EXIT;
```

**æ–¹æ³•2ï¼šä½¿ç”¨SQLæ–‡ä»¶**
```bash
# å…ˆä¸Šä¼ æ•°æ®åº“åˆå§‹åŒ–è„šæœ¬åˆ°æœåŠ¡å™¨ï¼Œç„¶åæ‰§è¡Œ
mysql -u root -p19921022 < æ•°æ®åº“åˆå§‹åŒ–-ç”Ÿäº§ç¯å¢ƒ.sql
```

**æµ‹è¯•æ•°æ®åº“è¿æ¥**ï¼š
```bash
mysql -u order_user -p'ljx19921022..' order_system -e "SELECT 'Connection OK' AS result;"
```

---

## ğŸ“¦ ç¬¬å››æ­¥ï¼šä»GitHubæ‹‰å–ä»£ç åˆ°æœåŠ¡å™¨

åœ¨æœåŠ¡å™¨ä¸Šæ‰§è¡Œï¼š

```bash
# è¿›å…¥é¡¹ç›®ç›®å½•
cd /var/www/order-system

# å…‹éš†ä»£ç ï¼ˆå¦‚æœæ˜¯ç¬¬ä¸€æ¬¡ï¼‰
git clone https://github.com/lijianxiong1022/lijianxiong.git .

# æˆ–è€…å¦‚æœç›®å½•å·²å­˜åœ¨ï¼Œæ‹‰å–æœ€æ–°ä»£ç 
git pull origin main
```

---

## âš™ï¸ ç¬¬äº”æ­¥ï¼šé…ç½®ç”Ÿäº§ç¯å¢ƒ

åœ¨æœåŠ¡å™¨ä¸Šæ‰§è¡Œï¼š

```bash
cd /var/www/order-system/backend

# å¤åˆ¶ç”Ÿäº§ç¯å¢ƒé…ç½®æ–‡ä»¶ï¼ˆå·²æ ¹æ®ä½ çš„ä¿¡æ¯ç”Ÿæˆï¼‰
# æ–‡ä»¶å·²åŒ…å«åœ¨ä»£ç ä¸­ï¼š.env.production

# éªŒè¯é…ç½®æ–‡ä»¶
cat .env.production
```

**å¦‚æœé…ç½®æ–‡ä»¶ä¸å­˜åœ¨**ï¼Œæ‰‹åŠ¨åˆ›å»ºï¼š
```bash
nano .env.production
```

ç„¶åç²˜è´´ä»¥ä¸‹å†…å®¹ï¼ˆå·²æ ¹æ®ä½ çš„ä¿¡æ¯ç”Ÿæˆï¼‰ï¼š
```env
USE_SQLITE=False
DB_HOST=localhost
DB_PORT=3306
DB_USER=order_user
DB_PASSWORD=ljx19921022..
DB_NAME=order_system

JWT_SECRET_KEY=prod-secret-key-2024-11-24-175244745-ljx19921022
JWT_ACCESS_TOKEN_EXPIRES=86400

FLASK_ENV=production
FLASK_DEBUG=False
FLASK_HOST=0.0.0.0
FLASK_PORT=5000
```

---

## ğŸ“¥ ç¬¬å…­æ­¥ï¼šå®‰è£…Pythonä¾èµ–

åœ¨æœåŠ¡å™¨ä¸Šæ‰§è¡Œï¼š

```bash
cd /var/www/order-system/backend

# å®‰è£…ä¾èµ–
pip3 install --user -r requirements.txt

# å¦‚æœé‡åˆ°æƒé™é—®é¢˜ï¼Œä½¿ç”¨ï¼š
# pip3 install -r requirements.txt --user
```

---

## ğŸ—ƒï¸ ç¬¬ä¸ƒæ­¥ï¼šåˆå§‹åŒ–æ•°æ®åº“

åœ¨æœåŠ¡å™¨ä¸Šæ‰§è¡Œï¼š

```bash
cd /var/www/order-system/backend

# è®¾ç½®ç¯å¢ƒå˜é‡
export FLASK_ENV=production

# åˆå§‹åŒ–æ•°æ®åº“ï¼ˆåˆ›å»ºè¡¨å’Œç®¡ç†å‘˜è´¦æˆ·ï¼‰
python3 init_db.py
```

**é¢„æœŸè¾“å‡º**ï¼š
```
[OK] é»˜è®¤ç®¡ç†å‘˜è´¦æˆ·åˆ›å»ºæˆåŠŸ
   ç”¨æˆ·å: admin
   å¯†ç : admin123
[OK] å¹³å°ç”¨æˆ·åˆ›å»ºæˆåŠŸ
   æ¨å¹¿ç : 888888
[OK] æ•°æ®åº“åˆå§‹åŒ–å®Œæˆ
```

---

## ğŸ”§ ç¬¬å…«æ­¥ï¼šé…ç½®SystemdæœåŠ¡

åœ¨æœåŠ¡å™¨ä¸Šæ‰§è¡Œï¼š

```bash
# å¤åˆ¶æœåŠ¡æ–‡ä»¶
sudo cp /var/www/order-system/backend/systemd/order-system.service /etc/systemd/system/

# æ£€æŸ¥æœåŠ¡æ–‡ä»¶è·¯å¾„æ˜¯å¦æ­£ç¡®
sudo nano /etc/systemd/system/order-system.service
# ç¡®è®¤ WorkingDirectory å’Œ ExecStart è·¯å¾„æ­£ç¡®

# é‡æ–°åŠ è½½systemd
sudo systemctl daemon-reload

# å¯ç”¨æœåŠ¡ï¼ˆå¼€æœºè‡ªå¯ï¼‰
sudo systemctl enable order-system

# å¯åŠ¨æœåŠ¡
sudo systemctl start order-system

# æ£€æŸ¥æœåŠ¡çŠ¶æ€
sudo systemctl status order-system
```

**æŸ¥çœ‹æ—¥å¿—**ï¼š
```bash
sudo journalctl -u order-system -f
```

---

## ğŸŒ ç¬¬ä¹æ­¥ï¼šé…ç½®Nginxï¼ˆæ¨èï¼‰

åœ¨æœåŠ¡å™¨ä¸Šæ‰§è¡Œï¼š

```bash
# å¤åˆ¶Nginxé…ç½®
sudo cp /var/www/order-system/nginx/order-system.conf /etc/nginx/conf.d/

# ç¼–è¾‘é…ç½®ï¼Œä¿®æ”¹server_name
sudo nano /etc/nginx/conf.d/order-system.conf
# å°† your_domain.com æ”¹ä¸º 175.24.47.45

# æˆ–è€…ä½¿ç”¨sedå‘½ä»¤ç›´æ¥æ›¿æ¢
sudo sed -i 's/your_domain.com/175.24.47.45/g' /etc/nginx/conf.d/order-system.conf

# æµ‹è¯•Nginxé…ç½®
sudo nginx -t

# å¯åŠ¨Nginx
sudo systemctl enable nginx
sudo systemctl start nginx

# æ£€æŸ¥NginxçŠ¶æ€
sudo systemctl status nginx
```

---

## ğŸ”¥ ç¬¬åæ­¥ï¼šé…ç½®é˜²ç«å¢™

åœ¨æœåŠ¡å™¨ä¸Šæ‰§è¡Œï¼š

```bash
# å¼€æ”¾HTTPç«¯å£
sudo firewall-cmd --permanent --add-service=http
sudo firewall-cmd --permanent --add-service=https
sudo firewall-cmd --reload

# æˆ–è€…åªå¼€æ”¾80ç«¯å£
sudo firewall-cmd --permanent --add-port=80/tcp
sudo firewall-cmd --reload

# æ£€æŸ¥é˜²ç«å¢™çŠ¶æ€
sudo firewall-cmd --list-all
```

---

## âœ… ç¬¬åä¸€æ­¥ï¼šæµ‹è¯•éƒ¨ç½²

### 11.1 æµ‹è¯•åç«¯API

```bash
# åœ¨æœåŠ¡å™¨ä¸Šæµ‹è¯•
curl http://localhost:5000/api/v1/user/register

# ä»å¤–éƒ¨æµ‹è¯•ï¼ˆä½¿ç”¨æœåŠ¡å™¨IPï¼‰
curl http://175.24.47.45/api/v1/user/register
```

### 11.2 æµ‹è¯•å‰ç«¯é¡µé¢

åœ¨æµè§ˆå™¨è®¿é—®ï¼š
- **ç”¨æˆ·ç«¯**ï¼š`http://175.24.47.45`
- **åå°ç®¡ç†**ï¼š`http://175.24.47.45/admin.html`

### 11.3 æµ‹è¯•åŠŸèƒ½

1. è®¿é—®å‰ç«¯é¡µé¢ï¼Œæµ‹è¯•æ³¨å†ŒåŠŸèƒ½
2. è®¿é—®åå°é¡µé¢ï¼Œä½¿ç”¨ `admin/admin123` ç™»å½•
3. æµ‹è¯•æŠ¥å•åŠŸèƒ½
4. æµ‹è¯•å…¶ä»–æ ¸å¿ƒåŠŸèƒ½

---

## ğŸ”„ åç»­æ›´æ–°æµç¨‹

### æœ¬åœ°å¼€å‘å®Œæˆåï¼Œæ›´æ–°åˆ°æœåŠ¡å™¨ï¼š

**æ­¥éª¤1ï¼šæœ¬åœ°æäº¤ä»£ç **
```powershell
cd E:\360MoveData\Users\86182\Desktop\test1
git add .
git commit -m "æ›´æ–°è¯´æ˜"
git push origin main
```

**æ­¥éª¤2ï¼šæœåŠ¡å™¨æ‹‰å–æ›´æ–°**
```bash
# SSHè¿æ¥åˆ°æœåŠ¡å™¨
ssh root@175.24.47.45

# è¿›å…¥é¡¹ç›®ç›®å½•
cd /var/www/order-system

# æ‹‰å–æœ€æ–°ä»£ç 
git pull origin main

# è¿›å…¥åç«¯ç›®å½•
cd backend

# å®‰è£…æ–°ä¾èµ–ï¼ˆå¦‚æœæœ‰ï¼‰
pip3 install --user -r requirements.txt

# é‡å¯æœåŠ¡
sudo systemctl restart order-system

# æ£€æŸ¥æœåŠ¡çŠ¶æ€
sudo systemctl status order-system
```

---

## ğŸ› ï¸ å¸¸ç”¨ç®¡ç†å‘½ä»¤

### æŸ¥çœ‹æœåŠ¡çŠ¶æ€
```bash
sudo systemctl status order-system
```

### æŸ¥çœ‹æœåŠ¡æ—¥å¿—
```bash
sudo journalctl -u order-system -f
```

### é‡å¯æœåŠ¡
```bash
sudo systemctl restart order-system
```

### åœæ­¢æœåŠ¡
```bash
sudo systemctl stop order-system
```

### å¯åŠ¨æœåŠ¡
```bash
sudo systemctl start order-system
```

---

## ğŸ“ é‡åˆ°é—®é¢˜ï¼Ÿ

### é—®é¢˜1ï¼šæœåŠ¡æ— æ³•å¯åŠ¨
```bash
# æŸ¥çœ‹è¯¦ç»†æ—¥å¿—
sudo journalctl -u order-system -n 50

# æ‰‹åŠ¨æµ‹è¯•å¯åŠ¨
cd /var/www/order-system/backend
python3 app.py
```

### é—®é¢˜2ï¼šæ•°æ®åº“è¿æ¥å¤±è´¥
```bash
# æµ‹è¯•æ•°æ®åº“è¿æ¥
mysql -u order_user -p'ljx19921022..' order_system -e "SELECT 1;"

# æ£€æŸ¥MySQLæœåŠ¡
sudo systemctl status mysql
```

### é—®é¢˜3ï¼šç«¯å£è¢«å ç”¨
```bash
# æ£€æŸ¥ç«¯å£å ç”¨
sudo netstat -tlnp | grep 5000

# å¦‚æœè¢«å ç”¨ï¼Œå¯ä»¥ä¿®æ”¹ç«¯å£æˆ–åœæ­¢å ç”¨è¿›ç¨‹
```

---

## ğŸ‰ éƒ¨ç½²å®Œæˆï¼

éƒ¨ç½²æˆåŠŸåï¼Œä½ å¯ä»¥ï¼š
1. åœ¨æœ¬åœ°ç»§ç»­å¼€å‘
2. é€šè¿‡Gitæ¨é€æ›´æ–°åˆ°æœåŠ¡å™¨
3. åœ¨æœåŠ¡å™¨ä¸Šæµ‹è¯•ç”Ÿäº§ç¯å¢ƒ

**é»˜è®¤ç®¡ç†å‘˜è´¦æˆ·**ï¼š
- ç”¨æˆ·åï¼š`admin`
- å¯†ç ï¼š`admin123`
- **è¯·éƒ¨ç½²åç«‹å³ä¿®æ”¹å¯†ç ï¼**

---

## ğŸ“‹ éƒ¨ç½²æ£€æŸ¥æ¸…å•

- [ ] ä»£ç å·²æ¨é€åˆ°GitHub
- [ ] æœåŠ¡å™¨ç¯å¢ƒå·²åˆå§‹åŒ–
- [ ] æ•°æ®åº“å·²åˆ›å»ºå’Œé…ç½®
- [ ] ä»£ç å·²æ‹‰å–åˆ°æœåŠ¡å™¨
- [ ] ç”Ÿäº§ç¯å¢ƒé…ç½®å·²è®¾ç½®
- [ ] Pythonä¾èµ–å·²å®‰è£…
- [ ] æ•°æ®åº“å·²åˆå§‹åŒ–
- [ ] SystemdæœåŠ¡å·²é…ç½®å¹¶å¯åŠ¨
- [ ] Nginxå·²é…ç½®ï¼ˆå¯é€‰ï¼‰
- [ ] é˜²ç«å¢™å·²å¼€æ”¾ç«¯å£
- [ ] å‰ç«¯é¡µé¢å¯ä»¥è®¿é—®
- [ ] APIå¯ä»¥æ­£å¸¸è®¿é—®
- [ ] åŠŸèƒ½æµ‹è¯•é€šè¿‡

---

**ç°åœ¨å¼€å§‹æ‰§è¡Œç¬¬ä¸€æ­¥ï¼šæ¨é€ä»£ç åˆ°GitHubï¼** ğŸš€

