# 🚀 开始步骤 - 一步步启动后端服务

## ✅ 第1步：检查环境（已完成）
- ✅ Python 3.13.9 已安装
- ✅ 所有依赖包已安装

## 📝 第2步：创建配置文件

**请手动创建 `.env` 文件**

在 `backend` 目录下创建 `.env` 文件，内容如下：

```
DB_HOST=localhost
DB_PORT=3306
DB_USER=root
DB_PASSWORD=
DB_NAME=order_system

JWT_SECRET_KEY=dev-secret-key-change-this-in-production-2023
JWT_ACCESS_TOKEN_EXPIRES=86400

FLASK_ENV=development
FLASK_DEBUG=True
FLASK_HOST=0.0.0.0
FLASK_PORT=5000
```

**重要**：
- 如果MySQL没有密码，`DB_PASSWORD=` 留空
- 如果有密码，填写你的MySQL密码

## 🗄️ 第3步：创建数据库

### 方法1：使用SQL脚本（推荐）
```bash
# 在项目根目录执行
mysql -u root -p < database/init.sql
```

### 方法2：手动创建
1. 打开MySQL命令行或客户端
2. 执行：
```sql
CREATE DATABASE order_system DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
```

## 🔧 第4步：初始化数据库

在 `backend` 目录下执行：
```bash
python init_db.py
```

这会：
- 创建所有数据表
- 创建默认管理员账户（用户名：admin，密码：admin123）

## 🎯 第5步：启动服务

在 `backend` 目录下执行：
```bash
python app.py
```

看到以下输出说明启动成功：
```
 * Running on http://0.0.0.0:5000
```

## 🧪 第6步：测试API

### 测试1：用户注册
打开浏览器或使用curl：
```
POST http://localhost:5000/api/v1/user/register
Content-Type: application/json

{
  "name": "测试用户",
  "phone": "13800138000",
  "password": "123456",
  "payPassword": "123456"
}
```

### 测试2：用户登录
```
POST http://localhost:5000/api/v1/user/login
Content-Type: application/json

{
  "phone": "13800138000",
  "password": "123456"
}
```

## 📋 检查清单

在启动前，请确认：
- [ ] `.env` 文件已创建并配置正确
- [ ] MySQL服务已启动
- [ ] 数据库 `order_system` 已创建
- [ ] 已运行 `python init_db.py` 初始化数据库

## 🆘 遇到问题？

### 问题1：数据库连接失败
**解决**：
1. 检查MySQL服务是否运行
2. 检查 `.env` 中的数据库配置
3. 测试MySQL连接：`mysql -u root -p`

### 问题2：端口被占用
**解决**：修改 `.env` 中的 `FLASK_PORT=5001`

### 问题3：模块导入错误
**解决**：重新安装依赖 `pip install -r requirements.txt`

## 🎉 成功标志

如果看到以下内容，说明启动成功：
```
 * Running on http://0.0.0.0:5000
 * Debug mode: on
```

现在可以：
1. 测试API接口
2. 前端对接（修改api.js使用真实API）
3. 开始功能测试

---

**提示**：如果MySQL没有安装或不想使用MySQL，可以告诉我，我可以帮你配置使用SQLite（更简单，无需安装数据库服务）。

