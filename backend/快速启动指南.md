# 快速启动指南

## 第一步：配置环境变量

### 选项1：使用批处理文件（推荐）
双击运行 `创建配置文件.bat`，按提示输入数据库信息

### 选项2：手动创建
在 `backend` 目录下创建 `.env` 文件，内容如下：

```env
# 数据库配置
DB_HOST=localhost
DB_PORT=3306
DB_USER=root
DB_PASSWORD=你的MySQL密码
DB_NAME=order_system

# JWT配置
JWT_SECRET_KEY=dev-secret-key-change-this-in-production-2023
JWT_ACCESS_TOKEN_EXPIRES=86400

# Flask配置
FLASK_ENV=development
FLASK_DEBUG=True
FLASK_HOST=0.0.0.0
FLASK_PORT=5000
```

**注意**：如果MySQL没有密码，`DB_PASSWORD=` 留空即可

## 第二步：创建数据库

### 方法1：使用SQL脚本（推荐）
```bash
mysql -u root -p < ../database/init.sql
```

### 方法2：手动创建
```sql
CREATE DATABASE order_system DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
```

## 第三步：初始化数据库

运行初始化脚本，这会：
- 创建所有数据表
- 创建默认管理员账户（admin/admin123）

```bash
python init_db.py
```

## 第四步：启动服务

```bash
python app.py
```

服务将在 `http://localhost:5000` 启动

## 验证服务

打开浏览器访问：`http://localhost:5000/api/v1/user/register`

如果看到JSON响应（即使是错误），说明服务已启动成功！

## 测试API

### 测试用户注册
```bash
curl -X POST http://localhost:5000/api/v1/user/register ^
  -H "Content-Type: application/json" ^
  -d "{\"name\":\"测试用户\",\"phone\":\"13800138000\",\"password\":\"123456\",\"payPassword\":\"123456\"}"
```

### 测试用户登录
```bash
curl -X POST http://localhost:5000/api/v1/user/login ^
  -H "Content-Type: application/json" ^
  -d "{\"phone\":\"13800138000\",\"password\":\"123456\"}"
```

## 常见问题

### 1. 数据库连接失败
- 检查MySQL服务是否运行
- 检查 `.env` 中的数据库配置
- 检查数据库用户权限

### 2. 端口被占用
- 修改 `.env` 中的 `FLASK_PORT=5001`（或其他端口）

### 3. 模块导入错误
- 确保已安装所有依赖：`pip install -r requirements.txt`

## 下一步

服务启动后，可以：
1. 测试API接口
2. 前端对接（修改api.js）
3. 测试完整功能流程

